<div style="padding:2%">
  <mat-tab-group>
     <!--- MANAGER ACCOUNTS-->
    <mat-tab label="Quản lý"> 
      <ng-template matTabContent>
        <div style="padding: 1%;">
          <div class="card"> 
                <div class="card-header">         
                  <h2 class="card-title" style="font-weight: 700;">Tài khoản Quản lý</h2>
                  <div class="card-tools">
                    <div class="input-group input-group-sm">
                      <input class="form-control" type="text" name="managerSearch" #myInput [(ngModel)]="managerToSearch" 
                      (input)="SearchManagers()" placeholder="Tìm tài khoản"/>
                      <div class="input-group-append">
                        <div class="btn btn-primary">
                          <i class="fas fa-search"></i>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
                <!-- /.card-header -->
                <div class="card-body p-0">
                  <div class="mailbox-controls">
                    <button type="button" data-toggle="modal" data-target="#AddModal" class="btn btn-default btn-sm"
                      style="font-size: 17px; background-color: #EEEEEE; border: #777 solid 0.5px;">
                      <i class="fas fa-plus-circle" style="padding: 5px;"> Thêm quản lý</i>
                    </button>
                    <button (click)="exportExcel(managers)" class="btn btn-info mb-4 mt-2">Xuất file Excel</button> 
                    <p *ngIf="dataSaved" ngClass="success"> 
                        {{message}}
                    </p>
                  </div>
                  <div class="table-responsive mailbox-messages">
                    <table class="table table-hover table-striped">
                      <tbody>
                        <tr style="font-size: 16px; background-color:#DDDDDD;">
                          <th (click)="SortManagers('userName')">Tên tài khoản&nbsp;<i class="fa fa-sort"></i></th>
                          <th>Họ</th>
                          <th>Tên</th>
                          <th>Thao tác</th>
                        </tr>
                        <tr *ngFor="let manager of managers | orderBy: key: reverse | paginate: {itemsPerPage:2, currentPage:pageStart};">                          
                          <td>{{manager.userName}}</td>
                          <td>{{manager.lastName}}</td>
                          <td>{{manager.firstName}}</td>                                                   
                          <td>
                            <button type="button" class="btn btn-default btn-sm" data-toggle="modal" data-target="#DeleteModal"
                              (click)="loadManagerToDelete(manager.userName)" style="font-size: 18px;">
                              <i class="fas fa-trash"></i>
                            </button>
                            <button type="button" data-toggle="modal" data-target="#UpdateModal" (click)="loadManagerToUpdate(manager.userName)"
                              class="btn btn-default btn-sm" style="font-size: 18px;">
                              <i class="fas fa-edit"></i>
                            </button>
                          </td>
                        </tr>
                      </tbody>
                    </table>
                    <!-- /.table -->
                  </div>
                  <!-- /.mail-box-messages -->
                </div>
                <!-- /.card-body -->
                <div class="card-footer p-0" style="background-color:#DDDDDD;">
                  <div class="mailbox-controls">
                    <!-- /.btn-group -->
                    <pagination-controls (pageChange)="pageStart = $event" style="text-align: center;" ></pagination-controls>
                  </div>
                </div>    
          </div>
        </div>     
      </ng-template>
      
    </mat-tab>

    <!--- CUSTOMER ACCOUNTS-->
    <mat-tab label="Khách hàng"> 
      <ng-template matTabContent>
        <div style="padding: 1%;">
          <div class="card"> 
                <div class="card-header">         
                  <h2 class="card-title" style="font-weight: 700;">Tài khoản Khách hàng</h2>
                  <div class="card-tools">
                    <div class="input-group input-group-sm">
                      <input class="form-control" type="text" name="customerSearch" #myInput [(ngModel)]="customerToSearch" 
                      (input)="SearchCustomers()" placeholder="Tìm tài khoản"/>
                      <div class="input-group-append">
                        <div class="btn btn-primary">
                          <i class="fas fa-search"></i>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
                <!-- /.card-header -->
                <div class="card-body p-0">
                  <div class="mailbox-controls">
                    <button (click)="exportExcel(customers)" class="btn btn-info mb-4 mt-2">Xuất file Excel</button>                   
                  </div>
                  <div class="table-responsive mailbox-messages">
                    <table class="table table-hover table-striped">
                      <tbody>
                        <tr style="font-size: 16px; background-color:#DDDDDD;">
                          <th (click)="SortCustomers('userName')">Tên tài khoản&nbsp;<i class="fa fa-sort"></i></th>
                          <th>Họ</th>
                          <th>Tên</th>
                        </tr>
                        <tr *ngFor="let customer of customers | orderBy: keyCustomer : reverseCustomer | paginate: {itemsPerPage:2, currentPage:pageStartCustomer}; ">                          
                          <td>{{customer.userName}}</td>
                          <td>{{customer.lastName}}</td>
                          <td>{{customer.firstName}}</td>                                                                          
                        </tr>
                      </tbody>
                    </table>
                    <!-- /.table -->
                  </div>
                  <!-- /.mail-box-messages -->
                </div>
                <!-- /.card-body -->
                <div class="card-footer p-0" style="background-color:#DDDDDD;">
                  <div class="mailbox-controls">
                    <!-- /.btn-group -->
                    <pagination-controls (pageChange)="pageStartCustomer = $event" style="text-align: center;" ></pagination-controls>
                  </div>
                </div>    
          </div>
        </div>     
      </ng-template>      
    </mat-tab>

  </mat-tab-group>
</div>

 <!-- Modal for add manager -->
        
 <div class="modal fade" id="AddModal" #AddModal tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header" style="padding-left: 40%; padding-bottom: 5px;">
        <h3 class="modal-title" id="exampleModalLabel" style="font-weight: 700;">Thêm tài khoản Quản lý</h3>
        <button type="button" class="btn-close" data-dismiss="modal" aria-label="Close"
          style="border: none;">x</button>
      </div>
      <form [formGroup]="addManagerForm" (ngSubmit)= "onAddManagerFormSubmit()">
        <label>UserName</label>
        <input formControlName="UserNameAdd" type="text" placeholder="UserName">       
        <br/>

        <label>First Name</label>
        <input formControlName="FirstNameAdd" type="text" placeholder="First Name">
        <br/>

        <label>Last Name</label>
        <input formControlName="LastNameAdd" type="text" placeholder="Last Name">
        <br/>

        <label>Password</label>
        <input formControlName="PasswordAdd" type="text" placeholder="Password">
        <br/>
        <div class="modal-footer" style="padding-right: 35%;">
          <button type="submit" [disabled]="!addManagerForm.valid" class="btn btn-success">
            Thêm
          </button>
          <button type="button" class="btn btn-secondary" data-dismiss="modal">Thoát</button>
        </div>
          
      </form>
      
    </div>
  </div>
</div>


<!-- Modal for update products -->

<div class="modal fade" id="UpdateModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header" style="padding-left: 40%; padding-bottom: 5px;">
        <h2 class="modal-title" id="exampleModalLabel" style="font-weight: 700;">Cập nhật tài khoản Quản lý</h2>
        <button type="button" class="btn-close" data-dismiss="modal" aria-label="Close"
          style="border: none;">x</button>
      </div>
      
      <div class="modal-body">
        <form [formGroup]="updateManagerForm"  (ngSubmit)="onUpdateManagerFormSubmit()">
          <label>UserName</label>
          <input formControlName="UserNameUpdate" type="text" placeholder="UserName" readonly>
          <br/>
  
          <label>First Name</label>
          <input formControlName="FirstNameUpdate" type="text" placeholder="First Name">
          <br/>
  
          <label>Last Name</label>
          <input formControlName="LastNameUpdate" type="text" placeholder="Last Name">
          <br/>
          
          <div class="modal-footer" style="padding-right: 35%;">
            <button type="submit" [disabled]="!updateManagerForm.valid" class="btn btn-success">
              Cập nhật
            </button>
            <button type="button" class="btn btn-secondary" data-dismiss="modal">Thoát</button>
          </div>
            
        </form>
      </div>
      
    </div>
  </div>
</div>




<!-- Modal for delete products -->

<div class="modal fade" id="DeleteModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header" style="padding-left: 40%; ">
        <h2 class="modal-title" id="exampleModalLabel" style="font-weight: 700;"> Xóa tài khoản</h2>
        <button type="button" class="btn-close" data-dismiss="modal" aria-label="Close"
          style="border: none;">x</button>
      </div>
      <div class="modal-body">
        <form (ngSubmit)="deleteManager()">
          <h3> Bạn muốn xóa tài khoản {{usernameToDelete}} này ?</h3>
          <div class="modal-footer" style="padding-right: 35%;">
            <button type="submit" class="btn btn-danger">Xoá</button>
            <button type="button" class="btn btn-secondary" data-dismiss="modal">Thoát</button>
          </div>
        </form>       
      </div>
      
    </div>
  </div>
</div>